@model List<SensoreAPPMVC.Models.PressureMap>

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "Your Heatmaps";
    ViewData["Subtitle"] = "Latest pressure recordings";
}

@if (!Model.Any())
{
    <div class="card-dark">
        <p>No heatmaps available yet.</p>
    </div>
}
else
{
    foreach (var map in Model)
    {
        <div class="card-dark mb-4">
            <div class="d-flex justify-content-between align-items-center mb-2">
                <div>
                    <strong>@map.Timestamp.ToLocalTime().ToString("dd MMM yyyy · HH:mm")</strong>
                    <div style="font-size:0.8rem;color:#9CA3AF;">
                        Peak: @map.PeakPressure.ToString("F1"),
                        Contact area: @map.ContactAreaPercent.ToString("F1")%
                    </div>
                </div>
                @if (map.IsHighRisk)
                {
                    <span class="badge bg-danger">High risk</span>
                }
            </div>

            <canvas class="heatmap"
                    width="320"
                    height="320"
                    data-grid='@map.GridData'>
            </canvas>
        </div>
    }
}
